<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>ArcGIS DevLabs: Track your location</title>
    <style>
        html,
        body,
        #viewDiv {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }
    </style>
    <link rel="stylesheet" href="https://jsdev.arcgis.com/4.10/esri/css/main.css">
    <script src="//ajax.googleapis.com/ajax/libs/dojo/1.14.1/dojo/dojo.js"></script>
    <script src="https://jsdev.arcgis.com/4.10/"></script>
    <script>
        require([
            'esri/Map',
            'esri/views/MapView',
            'esri/widgets/Locate',
            'esri/widgets/Track',
            'esri/widgets/Compass',
            'esri/Graphic',
            'dojo/domReady!'
        ], function (Map, MapView, Locate, Track, Compass, Graphic) {
            var map = new Map({
                basemap: 'streets',
                zoom: 15
            });

            var view = new MapView({
                container: 'viewDiv',
                map: map,
                zoom: 3,
                center: [-99.14725260912257, 36.48617178360141]
            });

            var locate = new Locate({
                view: view,
                useHeadingEnabled: false
                // goToOverride: function(view, options) {
                //   options.target.scale = 1500;
                //   return view.goTo(options.target);
                // }
            });
            view.ui.add(locate, 'top-left');

            var track = new Track({
                view: view,
                graphic: new Graphic({
                    symbol: {
                        type: 'simple-marker',
                        size: '9px',
                        color: 'green',
                        outline: {
                            color: '#efefef',
                            width: '1.2px'
                        }
                    }
                }),
                useHeadingEnabled: false,
                goToLocationEnabed: false,
                goToOverride: function (view, options) {
                    options.target.scale = null;
                    return view.goTo(options);
                }
            });
            view.ui.add(track, 'top-left');

            view.when(function () {
                // track.start();
                // view.zoom = 12;
            });

            var compass = new Compass({
                view: view
            });
            // adds the compass to the top left corner of the MapView
            view.ui.add(compass, 'top-left');
        });
    </script>
</head>

<body>
    <div id="viewDiv"></div>
</body>

</html>